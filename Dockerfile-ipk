FROM itdoginfo/openwrt-sdk-ipk:24.10.3

# Копируем проект
COPY . /builder/

# Создаем структуру вручную
RUN mkdir -p /builder/package/parentcontrol && \
    cp /builder/Makefile /builder/package/parentcontrol/ && \
    mkdir -p /builder/package/parentcontrol/files && \
    cp -r /builder/files/* /builder/package/parentcontrol/files/ 2>/dev/null || true

# Проверяем
RUN find /builder/package/parentcontrol/ -type f | head -10

# Собираем
RUN make defconfig && make package/parentcontrol/compile V=s