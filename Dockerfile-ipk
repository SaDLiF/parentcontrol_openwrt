FROM itdoginfo/openwrt-sdk-ipk:24.10.3

# Копируем ВСЮ структуру проекта
COPY . /builder/

# Создаем структуру пакета
RUN mkdir -p /builder/package/parentcontrol && \
    # Создаем символическую ссылку на Makefile
    ln -sf /builder/Makefile /builder/package/parentcontrol/Makefile && \
    # Копируем файлы
    mkdir -p /builder/package/parentcontrol/files && \
    cp -r /builder/files/* /builder/package/parentcontrol/files/

# Собираем
RUN make defconfig && \
    make package/parentcontrol/compile V=s